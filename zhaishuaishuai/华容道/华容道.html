<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>华容道</title>
    <script src="./vue.js"></script>
    <script src="./jquery.js"></script>
    <style>
        #app {
            width: 300px;
            height: 300px;
            border: 1px solid #000;
        }

        #app>div {
            width: 100px;
            height: 100px;
            float: left;
            text-align: center;
           
            border: 1px solid #000;
            box-sizing: border-box;
        }
    </style>
</head>

<body>
    <button>3*3</button><button>6*6</button><button>9*9</button>
    <div id="app">
        <div v-for='i,o  in arr' @click='move(i,o)'>{{i}}</div>
    </div>
</body>
<script>

    var arr = [1, 2, 3, 4, 5, 6, 7, 8, ''];
    var a = 3;
    $('button').on('click', function () {
        arr = [];
        var str = eval($(this).text());
        for (i = 1; i < str; i++) {
            arr.push(i)
        }
        arr.push('');
        vm.arr = foo(arr);
        console.log(arr)
        a = $(this).text().slice(0,1);
        vm.a = a
        $('#app div').css({
            'width': 300 / a + 'px',
            'height': 300 / a + 'px',
            'line-height':  300 / a + 'px'
        })
        console.log(vm.a)
    })

    function foo(arr) {
        var cloneArr = arr.concat();
        var len = cloneArr.length;
        for (var i = 0; i < len; i++) {
            var index = Math.floor(Math.random() * len);
            var temp = cloneArr[index];
            cloneArr[index] = cloneArr[i];
            cloneArr[i] = temp;
        }
        return cloneArr;
    }
    var vm = new Vue({
        el: '#app',
        data: {
            arr: foo(arr),
            a: a
        },
        methods: {
            move(i, o) {
                var s=o;
                var nullkey;
                this.arr.forEach((element, index) => {
                    if (element == '') {
                        nullkey = index
                    }
                });
                if (this.istrue(s, nullkey)) {
                    this.$set(this.arr, o, '')
                    Vue.set(this.arr, nullkey, i)
                }
            },
            istrue(s, nullkey) {
                if (s % this.a == 0) {//左边
                    return (s + 1 == nullkey || s + this.a == nullkey || s - this.a == nullkey)
                } else if ((s + 1) % this.a == 0) {//右边
                    return (s - 1 == nullkey || s + this.a == nullkey || s - this.a == nullkey)
                } else {//剩余
                    return (s + 1 == nullkey || s - 1 == nullkey || s + this.a == nullkey || s - this.a == nullkey)
                }
            }
        }

    })
   
</script>

</html>